### 都做了哪些编译优化？

_动态节点_

提取动态内容的节点，在更新的时候只需更新动态节点。在一个模板组件的根节点、v-if、v-for 会产生 block，如果子节点包含动态内容的节点把此节点提升到 `block` 的 `dynamicChildren` 属性上，在 `patch` 的时候如果包含 `dynamicChildren` 属性只需更新 `dynamicChildren` 上的节点，静态节点不需要更新。

_静态提升_

在编译时如果节点的属性或内容是静态的，那么会把创建节点的函数提升到 render 外部，这样只需初始创建一次在内容引用使用。

_预字符串化_

将大量的静态内容，合并成一个字符串不做虚拟 dom 的处理，后续可以直接使用 innerHTML 设置，节省内存的占用。

_缓存内联函数_

即使 props 没有变化单由于函数由于每次对比都会创建新函数造成不必要的函数，所以把函数缓存起来，后续全部都取缓存上的函数。

_v-once_

使用 v-once 来手动指定缓存组件，单这样也会跳过 diff，一般使用场景是需要动态绑定，但后续又不会发生变化。比如常量，写死的本地数据。
